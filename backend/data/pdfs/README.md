# PDF 교재 폴더

이 폴더에 PDF 교재 파일을 넣으면 배치 임포트 스크립트가 자동으로 처리합니다.

## 사용 방법

### 1. PDF 파일 준비
- 이 폴더에 PDF 파일을 복사합니다
- 파일명 규칙을 따르면 자동으로 교재 정보를 추출합니다

### 2. 파일명 규칙 (권장)
```
수능특강_국어_2024.pdf
수능특강_수학_2024.pdf
수능특강_영어_2024.pdf
```

형식: `교재명_과목_연도.pdf`

### 3. 스크립트 실행

#### 기본 모드 (패턴 매칭)
```bash
cd backend
python scripts/import_pdfs.py
```

#### AI 모드 (더 정확한 단원 추출)
```bash
cd backend
python scripts/import_pdfs.py --ai
```

**참고**: 
- AI 모드는 기본적으로 OpenAI (ChatGPT) API를 사용합니다. `.env` 파일에 `OPENAI_API_KEY`를 설정하세요.
- Gemini를 사용하려면 `.env` 파일에 `DEFAULT_AI_PROVIDER=gemini`과 `GEMINI_API_KEY`를 설정하세요.

## 처리 과정

1. **PDF 텍스트 추출**: PyPDF2를 사용하여 PDF에서 텍스트 추출
2. **교재 정보 추출**: 파일명에서 교재명, 과목, 연도 추출
3. **단원 추출**: 
   - 기본 모드: 정규식 패턴으로 "1단원", "제1장" 등 찾기
   - AI 모드: OpenAI (ChatGPT) 또는 Gemini API로 더 정확하게 단원 분리
4. **데이터베이스 저장**: Textbook과 Unit 모델로 저장

## 결과 확인

처리 완료 후 Textbook 페이지(`/textbook`)에서 확인할 수 있습니다.

## 문제 해결

### 텍스트 추출 실패
- PDF가 이미지 기반인 경우 OCR이 필요할 수 있습니다
- PDF가 암호화되어 있는지 확인하세요

### 단원 추출 실패
- AI 모드(`--ai`)를 사용해보세요
- PDF 구조가 표준적이지 않은 경우 수동으로 단원을 나눌 수 있습니다

### 중복 교재
- 같은 제목과 연도의 교재가 이미 있으면 건너뜁니다
- 기존 교재를 삭제하거나 파일명을 변경하세요


